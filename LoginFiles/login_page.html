<!DOCTYPE html>
<html>
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" type="text/css" href="login_page_css">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js">
</script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<style>
body {font-family: "Times New Roman", Georgia, Serif;}
h1,h2,h3,h4,h5,h6 {
    font-family: "Playfair Display";
    letter-spacing: 5px;
}
</style>
</head>
<body>

<!-- Navbar (sit on top) -->
<div class="w3-top">
  <div class="w3-bar w3-green w3-padding w3-card" style="letter-spacing:4px;">
    <a href="#home" class="w3-bar-item w3-button">Auto-Ad</a>
    <!-- Right-sided navbar links. Hide them on small screens -->
    <div class="w3-right w3-hide-small">
      <a href="#about" class="w3-bar-item w3-button">About</a>
      <a href="#menu" class="w3-bar-item w3-button">Contact</a>
      <a href="#contact" class="w3-bar-item w3-button">Sign Out</a>
    </div>
  </div>
</div>

<!-- Header -->
<header class="w3-display-container w3-content w3-wide" style="max-width:1600px;min-width:500px" id="home">
  
  <div class="bg-img">


  <form action="/start/campaign_data" method="post">
    <div class="input_fields_wrap">
        <button type="button" class="add_field_button">Add Campaigns</button>
        <input type="submit"></input>
         <div style="margin-top: 5px;">    	
         	<select name="city" id="dropdowncity" onchange="showRegion(this.value,1)">
				<!--<option value="none">Select City</option>
			   	<option value="ahmedabad">Ahmedabad</option>
				<option value="bengaluru">Bengaluru</option>
				<option value="chennai">Chennai</option>
				<option value="dehradoon">Dehradoon</option>
				<option value="delhi">Delhi</option>
				<option value="gurugram">Gurugram</option>
				<option value="hyderabad">Hyderabad</option>
				<option value="kolkata">Kolkata</option>
				<option value="mumbai">Mumbai</option>			
				<option value="noida">Noida</option>	
				<option value="pune">Pune</option>-->
			</select>	
			<select name="region" id="dropdownregion1">
             <!--This will be used for regions of city--> 
             <option value="none">Select Region</option>
			</select>
			<input type="text" name="no_of_autos" placeholder="No of autos">
         	<input type="text" name="no_of_days" placeholder="No of days">
         	<input type="file" name="pic" accept="image/* value="Upload your Ad">
         </div>            
    </div>
  </form>



  </div>
  
  <div class="w3-display-bottomleft w3-padding-large w3-opacity">
    <h1 class="w3-xxlarge"></h1>
  </div>
</header>

<!-- Page content -->
<div class="w3-content" style="max-width:1100px">

  <!-- About Section -->
  <div class="w3-row w3-padding-64" id="about">
    <div class="w3-col m6 w3-padding-large w3-hide-small">
     <img src="/w3images/tablesetting2.jpg" class="w3-round w3-image w3-opacity-min" alt="Table Setting" width="600" height="750">
    </div>

    <div class="w3-col m6 w3-padding-large">
      <h1 class="w3-center">About Us</h1><br>
      <p class="w3-large">We started as small startup with a vision to 
      	provide cheap advertising to other startups and organisation
      	who don't possess a millions to spend on it.We have network of 80000+ auto rickshaws across 20 cities.</p>
     
      <p class="w3-large">Our Chairperson Dr. Mayank Singh has always dream of making INDIA a business capital which needs that the every startup and small business should get and affordable but effective methods of advertising to expand themselves.Currently we provide adevertising on auto_rickshaws on website and our working on other new cheap and effective methods.</p>
    </div>
  </div>
  
  <hr>
  
  <!-- Menu Section -->
  <!--
  <div class="w3-row w3-padding-64" id="menu">
    <div class="w3-col l6 w3-padding-large">
         
    </div>
    
    <div class="w3-col l6 w3-padding-large">
      <img src="/w3images/tablesetting.jpg" class="w3-round w3-image w3-opacity-min" alt="Menu" style="width:100%">
    </div>
  </div>

  <hr>

   
  <div class="w3-container w3-padding-64" id="contact">
    <h1>Contact Us</h1><br>
  </div>
  
 -->
</div>

<!-- Footer -->
<footer class="w3-center w3-light-grey w3-padding-32">
  <p>Powered by <a href="https://www.w3schools.com/w3css/default.asp" title="W3.CSS" target="_blank" class="w3-hover-text-green">w3.css</a></p>
</footer>


<script type="text/javascript">
	$(document).ready(function() {
	var max_fields      = 10; //maximum input boxes allowed
	var wrapper   		= $(".input_fields_wrap"); //Fields wrapper
	var add_button      = $(".add_field_button"); //Add button ID
	callAjax('');
	var x = 1; //initlal text box count
	$(add_button).click(function(e){ //on add input button click
		e.preventDefault();
		if(x < max_fields){ //max input box allowed
			x++; //text box increment
			$(wrapper).append(`<div style="margin-top:5px">    	
         	<select name="city" id="dropdowncity${x}" onchange="showRegion(this.value,${x})">
         	  <option value="none">Select City</option>
			</select>	
			<select name="region" id="dropdownregion${x}">
             <!--This will be used for regions of city--> 
             <option value="none">Select Region</option>
			</select>
			<input type="text" name="no_of_autos" placeholder="No of autos">
         	<input type="text" name="no_of_days" placeholder="No of days">
         	<input type="file" name="pic" accept="image/* value="Upload your Ad">
         	<i class="remove_field fa fa-close"></i>
         </div>`); //add input box   
		}
		callAjax(x);
	});
	
	$(wrapper).on("click",".remove_field", function(e){ //user click on remove text
		e.preventDefault(); $(this).parent('div').remove(); x--;
	})
});
//var x=5;
//console.log(x);
function callAjax(x){
	$.ajax({
            type: "POST",
            url: "/start/aju",
            success: function(data)
            {
              data=JSON.stringify(data);	
            //console.log(x);
            //console.log(data);
            //console.log(typeof(data));
                helpers.buildDropdown(
                    jQuery.parseJSON(data),

                    $(`#dropdowncity${x}`)
                );
            }
        });
}

var helpers =
{
    buildDropdown: function(result, dropdown)
    {
        // Remove current options
        dropdown.html('');
        // Add the empty option with the empty message
        dropdown.append('<option value="none">Select City</option>');
        // Check result isnt empty
        if(result != '')
        {
            // Loop through each of the results and append the option to the dropdown
            $.each(result, function(k, v) {
                dropdown.append('<option value="' + v.name.toLowerCase() + '">' + v.name + '</option>');
            });
        }
    }
}

function showRegion(str,region_no){
	var xhttp;
	xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function(){
		if(this.readyState == 4 && this.status == 200){
          //console.log(this.responseText);
          var data = jQuery.parseJSON(this.responseText);
          //console.log(data);
          $(`#dropdownregion${region_no}`).html('');
          if(data !=''){

           	  $.each(data, function(k, v) {
                $(`#dropdownregion${region_no}`).append('<option value="' + v.sublocality.toLowerCase() + '">' + v.sublocality + '</option>');
              });
		   }	
	    }
	}
	xhttp.open("GET","/start/region?city="+str,true);
	xhttp.send();
}
</script>
</body>
</html>
